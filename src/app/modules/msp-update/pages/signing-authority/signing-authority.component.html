<common-page-framework layout='blank'>
  <h2 class='h1'>#NotForTesting  Signing Authority</h2>
  <p>The Signing Authority represents the Organization. An Organization can only have a single Signing Authority.</p>
  <hr>

  <div class="row mb-4">
    <button type='button'
            class='btn btn-secondary col mr-4'
            [disabled]='showAddSigningAuthority'
            (click)="addSigningAuthority()">Add Signing Authority</button>
    <button type='button'
            class='btn btn-secondary col mx-2'
            [disabled]='showRemoveSigningAuthority'
            (click)="removeSigningAuthority()">Remove Signing Authority</button>
    <button type='button'
            class='btn btn-secondary col ml-4'
            [disabled]='showUpdateSigningAuthority'
            (click)="updateSigningAuthority()">Update Signing Authority</button>
  </div>

  <!-- ARC - Review if necessary. May not be at all. Could cause bugs. -->
  <!-- <form [formGroup]='fg'> -->

    <div *ngIf="showAddSigningAuthority">

      <common-xicon-button class='d-block pb-1' label="Cancel Add Signing Authority" (clickEvent)="cancelAddSigningAuthority()"></common-xicon-button>

      <h4 class='border-bottom'>Add a new Signing Authority</h4>


      <!-- ARC - PROBLEM - This uses the @deprecated validator from validator-helpers.ts.  May need to wind up supporting deprecated more often for tests, will have to confer with Faheem. -->
      <sitereg-msp-register-user-msp [fg]="addFg"
                                      [showMspDirectAccessQuestion]="true"
                                      [showAdministeringMSPForQuestion]='false'></sitereg-msp-register-user-msp>

    </div>


    <div *ngIf="showRemoveSigningAuthority">

      <common-xicon-button class='d-block pb-1' label="Cancel Remove Signing Authority" (clickEvent)="cancelRemoveSigningAuthority()"></common-xicon-button>      

      <h4 class='border-bottom'>Remove an existing Signing Authority</h4>
      <p>Signing Authority Information</p>

      <form [formGroup]='removeFg'>
        <div class='form-group col-sm-8 p-sm-0'>

          <label for='removeSAEmail'>Enter the email of the Signing Authority to remove</label>
          <input type='text'
          class='form-control'
          name='removeSAEmail'
          formControlName='removeSAEmail'
          id='removeSAEmail'
          placeholder="example@example.com">

          <sitereg-error-box [error]="validFormControl(removeFg, 'removeSAEmail')"
          errorMessage="Email TODO">
        </sitereg-error-box>


        <label for='removeSAUserID'>Ministry asigned User ID (optional)</label>
        <input type='text'
        class='form-control'
        name='removeSAUserID'
        formControlName='removeSAUserID'
        id='removeSAUserID'
        placeholder="todo">

        <sitereg-error-box [error]="validFormControl(removeFg, 'removeSAUserID')"
        errorMessage="UserID TODO">
      </sitereg-error-box>
    </div>
    </form>

    </div>

    <div *ngIf="showUpdateSigningAuthority">

        <common-xicon-button class='d-block pb-1' label="Cancel Update Signing Authority" (clickEvent)="cancelUpdateSigningAuthority()"></common-xicon-button>

        <h4 class='border-bottom'>Update Signing Authority</h4>

        <form [formGroup]='updateFg'>
          <div class='form-group col-sm-8 p-sm-0'>
            <label for='updateSAEmail'>Enter the email of the Signing Authority to edit</label>
            <input type='text'
                   class='form-control'
                   name='updateSAEmail'
                   formControlName='updateSAEmail'
                   id='updateSAEmail'
                   placeholder="example@example.com">

            <sitereg-error-box [error]="validFormControl(updateFg, 'updateSAEmail')"
                               errorMessage="Email TODO">
            </sitereg-error-box>
          </div>
        </form>

        <!-- ARC - Should this go inside of the <form> above? -->
        <!-- ARC - PROBLEM - This uses the @deprecated validator from validator-helpers.ts.  May need to wind up supporting deprecated more often for tests, will have to confer with Faheem. -->
        <sitereg-msp-register-user-msp [fg]="updateFg"
                                        [showMspDirectAccessQuestion]="true"
                                        [showAdministeringMSPForQuestion]='false'></sitereg-msp-register-user-msp>

      </div>

<!-- </form> -->

</common-page-framework>
<common-form-action-bar (btnClick)="continue()"  [submitLabel]="buttonLabel" [canContinue]='canContinue()'>
</common-form-action-bar>
